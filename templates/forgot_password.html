
{% extends "base.html" %}

{% block title %}Forgot Password - Paddy Pest Predictor{% endblock %}

{% block content %}
<main class="flex-grow container mx-auto p-4 md:p-8 flex flex-col items-center justify-center">
  <div class="w-full max-w-md bg-white rounded-2xl shadow-lg p-8 border border-gray-200">
    <h2 class="text-2xl font-bold text-center text-green-800 mb-6">Forgot Password</h2>
    
    {% if step == '1' %}
      <form method="POST" action="{{ url_for('forgot_password', step='1') }}">
        <p class="text-center text-gray-600 mb-4">Enter your mobile number to receive a verification code.</p>
        <input type="tel" name="mobile" class="input-style mb-4" placeholder="Mobile Number" required>
        <button type="submit" class="btn-primary w-full">Send OTP</button>
      </form>
    {% elif step == '2' %}
      <form method="POST" action="{{ url_for('forgot_password', step='2') }}">
        <p class="text-center text-gray-600 mb-4">Enter the 4-digit code sent to your phone.</p>
        <input type="text" name="otp" class="input-style mb-4" placeholder="Enter OTP" required>
        <button type="submit" class="btn-primary w-full">Verify OTP</button>
      </form>
    {% elif step == '3' %}
      <form method="POST" action="{{ url_for('forgot_password', step='3') }}">
        <p class="text-center text-gray-600 mb-4">Enter your new password.</p>
        <input type="password" name="newPassword" class="input-style mb-4" placeholder="New Password" required>
        <input type="password" name="confirmPassword" class="input-style mb-4" placeholder="Confirm New Password" required>
        <button type="submit" class="btn-primary w-full">Reset Password</button>
      </form>
    {% endif %}

    <p class="text-center text-gray-500 text-sm mt-6">
      Remember your password?
      <a href="{{ url_for('login') }}" class="font-bold text-green-600 hover:text-green-800">
        Back to Login
      </a>
    </p>
  </div>
  <style>
    .input-style { box-shadow: none; appearance: none; border: 1px solid #e2e8f0; border-radius: 0.5rem; width: 100%; padding: 0.75rem 1rem; color: #4a5568; }
    .input-style:focus { outline: none; box-shadow: 0 0 0 2px #48bb78; }
    .btn-primary { padding: 0.75rem 2rem; background-color: #38a169; color: white; font-weight: bold; border-radius: 0.5rem; box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1); transition: background-color 0.2s; }
    .btn-primary:hover { background-color: #2f855a; }
  </style>
</main>
{% endblock %}
